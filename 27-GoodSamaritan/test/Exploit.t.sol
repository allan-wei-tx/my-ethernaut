// SPDX-License-Identifier: UNLICENSED
pragma solidity ^0.8.13;

import {Test, console2} from "forge-std/Test.sol";
import {IGoodSamaritan,ICoin,IWallet, Exploit} from "../src/Exploit.sol";

contract ExploitTest is Test {
    function setUp() public {
        vm.createSelectFork(vm.envString("GOERLI_RPC_URL"));
    }

    function test_Exploit() public {
        Exploit exploit = new Exploit();
        address goodSamaritan = 0xb86229ad658a0E73A41D0580Ff5De65Ab4988Bae;
        address wallet = IGoodSamaritan(goodSamaritan).wallet();
        address coin = IGoodSamaritan(goodSamaritan).coin();
        exploit.exploit(goodSamaritan);
        assertEq(ICoin(coin).balances(wallet), 0);
    }
}
